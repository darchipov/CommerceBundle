<div class="row sub-header">
    <div class="col-md-8">
        <h2>{{ 'ekyna_commerce.supplier_delivery.header.list'|trans }}</h2>
    </div>
    <div class="col-md-4">
        <div class="actions">
            {{ ui_button('ekyna_commerce.supplier_delivery.button.new', {
                'type': 'link',
                'path': path('ekyna_commerce_supplier_delivery_admin_new', {
                    'supplierOrderId': supplierOrder.id
                }),
                'theme': 'primary',
                'icon': 'plus'
            }) }}
        </div>
    </div>
</div>

{% for delivery in supplierOrder.deliveries %}
    <table class="table table-stripped">
        <thead>
        <tr>
            <th>{{ 'ekyna_core.field.designation'|trans }}</th>
            <th>{{ 'ekyna_core.field.reference'|trans }}</th>
            <th>{{ 'ekyna_core.field.quantity'|trans }}</th>
        </tr>
        </thead>
        <tbody>
        {% for item in delivery.items %}
        <tr>
            {% set orderItem = item.orderItem %}
            <td>
                <a href="{{ path('ekyna_commerce_supplier_product_admin_show', {
                    'supplierId': orderItem.product.supplier.id,
                    'supplierProductId': orderItem.product.id,
                }) }}">
                    {{ orderItem.designation }}
                </a>
            </td>
            <td>{{ orderItem.reference }}</td>
            <td class="text-right">{{ item.quantity|number_format }}{# TODO packaging format #}</td>
        </tr>
        {% endfor %}
        </tbody>
    </table>
    <div class="actions">
        {{ admin_resource_btn(delivery, 'edit', {'size': 'xs'}) }}
        {{ admin_resource_btn(delivery, 'remove', {'size': 'xs'}) }}
    </div>
    {% if not loop.last %}<hr>{% endif %}
{% endfor %}
